<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Misioneros y Can√≠bales - Visual</title>
    <link href="/static/styles.css" rel="stylesheet">
    <script src="/static/d3.v7.min.js"></script>
</head>

<body class="bg-blue-100 min-h-screen flex flex-col items-center p-6">

    <h1 class="text-3xl font-bold text-center mb-6">üåä Misioneros y Can√≠bales</h1>

    <div id="timer" class="text-xl font-semibold mb-2">‚è±Ô∏è Tiempo: 00:00</div>

    <div id="message" class="mb-3 text-lg font-bold text-green-700"></div>

    <div
        class="flex items-center justify-center w-full max-w-5xl h-40 rounded-lg shadow-lg overflow-hidden border border-gray-300">
        <!-- Orilla izquierda -->
        <div id="left" class="w-1/3 h-full bg-green-200 flex justify-end items-center p-4 gap-1 flex-wrap text-2xl">
            <!-- personajes renderizados desde JS -->
        </div>

        <!-- R√≠o -->
        <div class="w-1/3 h-full bg-blue-300 flex items-center justify-center relative">
            <div id="boat" class="absolute transition-all duration-500 text-4xl cursor-pointer flex gap-1 items-center">
                <!-- personajes en el bote + √≠cono -->
                <span>‚õµ</span>
            </div>
        </div>

        <!-- Orilla derecha -->
        <div id="right" class="w-1/3 h-full bg-green-200 flex justify-start items-center p-4 gap-1 flex-wrap text-2xl">
            <!-- personajes renderizados desde JS -->
        </div>
    </div>

    <div class="flex space-x-4 mt-6 items-center">
        <label for="auto-mode" class="text-lg font-semibold">Modo:</label>
        <select id="auto-mode" class="px-2 py-1 rounded bg-white text-black">
            <option value="safe">Seguro</option>
            <option value="random">Aleatorio</option>
        </select>

        <button onclick="startAuto()" class="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded">
            Autom√°tico
        </button>

        <button id="reset-btn" onclick="resetGame()"
            class="px-4 py-2 bg-blue-500 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed" disabled>
            Reiniciar Juego
        </button>

        <!--
        <button id="btn-draw-manual-tree"
            class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded shadow-md transition-colors duration-200 my-4">
            Mostrar √°rbol manual
        </button>
        -->

    </div>

    <!-- Tabla Modo Seguro -->
    <div id="safe-table-container" class="mt-10 w-full max-w-4xl" style="display:none">
        <h2 class="text-2xl font-bold mb-4 text-green-700">Ruta - Modo Seguro</h2>
        <table class="table-auto w-full bg-white shadow-md rounded border border-gray-300">
            <thead>
                <tr class="bg-green-200">
                    <th class="px-4 py-2 border">Paso</th>
                    <th class="px-4 py-2 border">Izquierda</th>
                    <th class="px-4 py-2 border">Derecha</th>
                    <th class="px-4 py-2 border">Bote</th>
                    <th class="px-4 py-2 border">Estado</th>
                </tr>
            </thead>
            <tbody id="table-safe"></tbody>
        </table>
    </div>

    <!-- Tabla Modo Aleatorio -->
    <div id="random-table-container" class="mt-10 w-full max-w-4xl" style="display:none">
        <h2 class="text-2xl font-bold mb-4 text-blue-700">Ruta - Modo Aleatorio</h2>
        <table class="table-auto w-full bg-white shadow-md rounded border border-gray-300">
            <thead>
                <tr class="bg-blue-200">
                    <th class="px-4 py-2 border">Paso</th>
                    <th class="px-4 py-2 border">Izquierda</th>
                    <th class="px-4 py-2 border">Derecha</th>
                    <th class="px-4 py-2 border">Bote</th>
                    <th class="px-4 py-2 border">Estado</th>
                </tr>
            </thead>
            <tbody id="table-random"></tbody>
        </table>
    </div>

    <!-- Tabla Manual -->
    <div id="manual-table-container" class="mt-10 w-full max-w-4xl" style="display:none">
        <h2 class="text-2xl font-bold mb-4 text-purple-700">Ruta - Juego Manual</h2>
        <table class="table-auto w-full bg-white shadow-md rounded border border-gray-300">
            <thead>
                <tr class="bg-purple-200">
                    <th class="px-4 py-2 border">Paso</th>
                    <th class="px-4 py-2 border">Izquierda</th>
                    <th class="px-4 py-2 border">Derecha</th>
                    <th class="px-4 py-2 border">Bote</th>
                </tr>
            </thead>
            <tbody id="table-manual"></tbody>
        </table>
    </div>

    <div id="tree-container" class="mt-5 border border-gray-300 p-2 w-full max-w-4xl h-[600px] overflow-auto">
    </div>
    <script src="/static/app.js"></script>
</body>

</html>